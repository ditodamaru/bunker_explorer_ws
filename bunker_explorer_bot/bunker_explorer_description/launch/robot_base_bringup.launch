
<launch>

  <arg name="visualize" default="true" />
  <!-- <arg name="model" default="$(find bunker_explorer_description)/urdf/REV3_bunker_realsense.urdf.xacro"/> -->
  <arg name="model" default="$(find bunker_explorer_description)/urdf/bunker_realsense.urdf.xacro"/>
  <!-- <arg name="model" default="$(find bunker_explorer_description)/urdf/bunker_explorer_description.urdf.xacro"/> -->
      <arg name="rvizconfig" default="$(find bunker_explorer_description)/rviz/bunker_mapping.rviz" />

  
  <!-- 
      The robot can be controlled either through CAN bus or UART port. Make sure the hardware
      interface is set up correctly before attempting to connect to the robot.
      
      You only need to specify the port name, such as "can0", "/dev/ttyUSB0". The port should 
      operate with the following configuration:
      
      * CAN bus: 500k
      * UART: 115200, Parity None, 8-bit Data, 1 Stop Bit 
  -->
  <!-- setting bunker_base_node parameter setting-->
  <arg name="port_name" default="can0" />
  <arg name="is_bunker_mini" default="false" />
  <arg name="simulated_robot" default="false" />
  <arg name="odom_frame" default="odom" /> <!--original : odom-->
  <arg name="odom_topic_name" default="/odom_bunker" /> <!--original : odom-->
  <arg name="pub_tf" default="true" />  <!-- original : true-->
  <arg name="base_frame_id" default="base_footprint"/> <!--original: base_footprint-->

	<!-- static transform setting -->
  <arg name="statictf_gps" default="false" />
  <arg name="parent_statictf_gps" default="robot_base" />

  <!-- Launch static_transform_publisher if static_transform parameter is set to true -->
	<!-- option : robot_base, base_footprint -->
  <!-- Launch static_transform_publisher if static_transform parameter is set to true -->
  <node if="$(arg statictf_gps)" pkg="tf" type="static_transform_publisher" name="gps_broadcaster" args="-0.3 0 0.35 0 0 0 1 $(arg parent_statictf_gps) gps 100" />

  <node name="bunker_base_node" pkg="bunker_base" type="bunker_base_node" output="screen">
      <remap from="/cmd_vel" to="/smoother_cmd_vel"/>
      <param name="is_bunker_mini" type="bool" value="$(arg is_bunker_mini)" />
      <param name="port_name" type="string" value="$(arg port_name)" />
      <param name="simulated_robot" type="bool" value="$(arg simulated_robot)" />
      <param name="odom_frame" type="string" value="$(arg odom_frame)" />
      <!-- original <param name="base_frame" type="string" value="base_link" /> -->
      <param name="base_frame" type="string" value="$(arg base_frame_id)" />
      <param name="odom_topic_name" type="string" value="$(arg odom_topic_name)" />
      <param name="pub_tf" type="bool" value="$(arg pub_tf)" />
  </node>
  
  <!-- <param name="robot_description" textfile="/home/andi/catkin_devel_ws/src/bunker_explorer_bot/bunker_explorer_description/urdf/rev4_bunker_realsense_imu_to_robot_base.urdf" /> -->
  <!-- <param name="robot_description"  textfile="$(find bunker_explorer_description)/urdf/bunker_explorer_description.urdf" /> -->
  <!-- <param name="robot_description" textfile="/home/andi/catkin_devel_ws/src/bunker_explorer_bot/bunker_explorer_description/urdf/REV3_bunker_realsense.urdf" /> -->
  <param name="robot_description" textfile="/home/andi/catkin_devel_ws/src/bunker_explorer_bot/bunker_explorer_description/urdf/bunker_realsense.urdf" />
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />


  <node name="joint_state_publisher" pkg="joint_state_publisher_gui" type="joint_state_publisher_gui" >
    <rosparam param="source_list">["joint_states_ct"]</rosparam>
  </node>
  
  <group if="$(arg visualize)">
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)" required="true" />
  </group>

  <!-- IMU LAUNCH -->
    <!-- PARAM IMU -->
    <!--<param name="m_bSingle_TF_option" type="bool" value="false" /> <!-false-> 
  <node pkg="iahrs_driver" type="iahrs_driver" name="iahrs_driver" output="screen" /> -->

  <!-- GPS LAUNCH AND NTRIP ROS -->
  <include file="$(find ntrip_ros)/launch/ntrip_ros.launch">
  </include>

  <!-- <node pkg="tf" type="static_transform_publisher" name="gps_broadcaster" args="-0.3 0 0.35 0 0 0 1 robot_base gps 100" /> -->


  <!-- CAMERA LAUNCH -->
  <!-- <include file="$(find bunker_explorer_perception)/launch/start_rs_camera.launch">
  </include> -->







</launch>